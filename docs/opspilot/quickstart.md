---
sidebar_position: 2
---

# 快速入门

背景说明

企业中有大量知识和信息，包括政策、产品说明、流程文档和技术支持等。员工在日常工作中经常需要这些信息，以做出决策或解决问题。传统的查找方式（如手动搜索文档或向同事咨询）可能耗时且效率低下，可以借助OpsPilot，集中管理企业知识，并创建对外使用的机器人，结合大模型提供智能化回答，提升用户体验。

## 第一步：新建知识库

为了更好的使用机器人，需要对机器人引用的知识进行上传-存储-训练-检索，这些可在“OpsPilot-知识库”中实现。在“知识库”中创建一个知识库，以存储和管理机器人所需的所有信息和数据。

### 创建知识库

输入知识库的名称和描述，选择归属的组织（知识库的查看和操作权限和所属组织有关，可多选），选择Embed模型（用于知识库知识的存储，以便后续高效搜索）
![功能图片1.png](https://static.cwoa.net/0cbbf72e17774d4bbd6a23792cf9fa6b.png)

### 进行知识库文档的上传

- 知识库文档的上传分为三类，每一类上传有其对应数据需提供。
  - 本地文档（支持上传word、Excel、pdf等格式的文档）
  - 网页文档（直接引用网站信息）
  - 自定义文档（自行撰写的文档）
![功能图片2.png](https://static.cwoa.net/bd68106b63f14a03b202cc5bfb10df1f.png)

### 选择——提供知识本体

- 支持三种方式上传：本地文件、网页链接、自定义文本
- **本地文件**：点击提示区域自动打开资源管理器，打开需要上传文件夹选取文件上传；或者提前打开文件夹，选取文件直接拖拽到有效区域内。
- **网页文档**：为此文档定义名称方便理解，输入需要上传的网址链接，选择对于该网址需要跳转的网址数量（深度）。
- **自定义文本**：一些零散或者自创的内容可通过手动输入创建。
![功能图片3.png](https://static.cwoa.net/265554dfa00740158aba2f256341bd26.png)

### 提取——文档预处理1

上传的文件首先需要将文件内的文本提取出来，系统会根据文件类型初始匹配推荐方式，在配置操作中可修改。
![功能图片4.png](https://static.cwoa.net/df8e5ad878c34335a29cba0d9adab7c3.png)
一共4种提取方式，包括：全文提取、章节提取、工作表提取、行级提取，分别使用不同情况，可根据提取说明中的文字说明和示例图选取想要的提取方式。（全文提取中，pdf文件不可编辑的一类可启动OCR增强识别图像中的文字）

### 分块——文档预处理2

- 提取出文本之后，会进一步预处理知识内容，将文本分块以便后续检索能精准快速找到需要的内容。
  - 提供4种分块方法，每种方法配备参数设置和分块示例以供调整。点击【查看块】可查看分块效果：
  - 包括定长分块、循环分块、语义分块、不分块。
  - 定长分块可设定固定的分块长度，循环分块在此基础上可设置分块之间可重叠的长度以保留前后文衔接；
- 语义分块启用Embed模型基于算法分析文字意思、逻辑分块。
 ![功能图片5.png](https://static.cwoa.net/37eca88272524c35bc4da5dd96322c25.png)
- **完成阶段**
- **训练状态**：返回文档列表查看上传知识的状态。文档上传-切片完成后，会对所有的文档进行切片和训练，状态为“就绪”时，说明该文档可使用。
- **测试**：文档创建好后，对该知识库的检索进行设置，并测试效果。
![功能图片6.png](https://static.cwoa.net/71fd949be73849db871df03a6bff57b8.png)
![功能图片7.png](https://static.cwoa.net/00f1621a70d1421ba0f475f58a32a086.png)
![功能图片8.png](https://static.cwoa.net/25e749af059c44d9ad62f05b52f8d433.png)

### 分块界面

分块界面增加“批量生成Q&A”和“批量删除”。

可编辑分块、单个生成问答对、单个删除。

卡片支持展示每个分块的对应问答对的数量和字符的数量。

支持对分块进行删除，支持单个/批量，可以仅删除分块、也可同时删除关联的问答对。
![功能图片9.png](https://static.cwoa.net/c79e7bb831bc433687908ae37f195144.png)

### 问答对——文档预处理3

生成问答对

问答对的生成方式主要为LLM大模型对分块数据智能生成问答对。并且在知识库的文档中，用户可自行选择文件或网页链接并通过LLM模型自动生成问答对。
![功能图片10.png](https://static.cwoa.net/73eb9e2315bb4244869ce026bb25af43.png)
![功能图片11.png](https://static.cwoa.net/ef4eb27bec2b48bab895d7689961727f.png)
![功能图片12.png](https://static.cwoa.net/951a230a0659492e9d7c3c898320214c.png)

查看问答对

在知识库中，用户可直观的查看所有问答对。问答对的信息包括名称，问答对数量，创建时间，创建者，操作等，同时可以点击查看每一份问答对拆解的详情问题和答案。
![功能图片13.png](https://static.cwoa.net/0f9ba4d8cf7744718cc21eb876c7f8fd.png)
问答对界面：问答对要是关联了分块，在卡片标注“chunk”代表与原始分块关联，查看问答对详情时，也可以查看源分块的详情。
![功能图片14.png](https://static.cwoa.net/dc0bc0b49bfd4b858b9179f5c44d8c25.png)
![功能图片15.png](https://static.cwoa.net/fbf312e261364c51abe940cc73aba3f9.png)

### 知识图谱——文档预处理4

生成知识图谱

知识图谱的生成方式主要为LLM大模型，重排模型，Embed模型智能生成知识图谱。（注意：这里的embed模型要选择与知识库创建的时候一样的embed模型）在知识库的文档中，用户可自行选择文件并通过LLM模型自动生成知识图谱。
![功能图片16.png](https://static.cwoa.net/98178ac3ae0348d199344dc35880d46a.png)
查看知识图谱

选中的源文件汇总成知识图谱，图谱由节点和关联组成，节点分为实体，分块和社区。节点与节点之间的连线称为关联。在知识库中，用户可直观的查看所有知识图谱，同时可以点击具体查看知识图谱的节点，关系，总结等。
![功能图片17.png](https://static.cwoa.net/14b9bfab5ce34f57a546c9474f1966af.png)

### 结果检索

用户提出问题时，智能运维OpsPilot会通过灵活路由，选择调用知识图谱，还是知识分块，问答对作为召回结果，确保用户始终能获得最优答案。
![功能图片18.png](https://static.cwoa.net/a81070b4edb440f999d0c054de7e60ad.png)

## 第二步：新建智能体

接下来，需要定义机器人的智能体，可以创建空白智能体，也可以直接选择内置好的模板创建智能体。根据需求设定智能体的逻辑和流程，以确保机器人能够有效地响应用户请求。
![功能图片19.png](https://static.cwoa.net/05f5a3423f2c498f8e4f021e63d2f316.png)

- 在配置机器人的智能体信息时，需要填写的参数如下：
  - 基本信息：名称/分组/简介,可以进行修改
  - LLM模型：支持选择内置的LLM大模型，大模型可以根据在知识库搜索到的结果，进行再次总结，并且回复。
    - LLM的温度参数：默认为0.7，用于控制文本生成的随机性和创造性；低温度（比如0.2）会生成更确定的结果，而高温度（比如0.9）则会增加文本的多样性和随机性。通过调节温度，用户可以根据需求平衡生成内容的准确性和创新性。
    - 提示：可以输入相关的提示语，引导模型生成特定的回复，通过提供上下文或问题以调节输出内容的方向和质量。
    - 对话历史：默认是10:，聊天历史数量指的是系用户与机器人之间互动的对话轮次或消息总数。这一数量可以帮助机器人理解上下文，并增强回复的相关性和连贯性。
    - RAG：RAG是一种将信息检索与生成模型结合的架构，先从知识库中检索相关信息，然后使用生成模型产生上下文相关的回答。
    - RAG来源：开启后，在对话时可以显示引用的知识来源
    - 知识库：支持选择同一分组下的知识库作为知识来源，并为知识库调整阈值，从而提高回答的准确性和可靠性。
    - 工具：给智能体获取外部数据或者执行操作的能力，具体调用哪个工具，由大模型自主决定。

完成设置后，用户可通过与智能体对话来测试和优化智能体效果。
![功能图片20.png](https://static.cwoa.net/df09a76ceb2247089a2668b169ef1b6f.png)

## 第三步：新建应用机器人

当智能体创建完成后，我们需要在工作室正式创建应用机器人，并且把应用发布出去，以供大家使用。
![功能图片21.png](https://static.cwoa.net/29d1953acdf54777a882430c6e390447.png)
应用需要填写名称、分组和介绍等信息，并且选择使用的模型（目前只用内置核心模型可使用），并选择这个应用使用的技能（智能体）以及发布的渠道。
![功能图片22.png](https://static.cwoa.net/0988212bd6c547f2974b7bc66908f774.png)
应用的渠道目前支持四类，需要提前在通知（Channel）中设置好需要使用渠道的参数信息。
![功能图片23.png](https://static.cwoa.net/b7a35d04ba4d42c7b5cb967eb64e7f35.png)
全部设置完后，点击“保存&发布”按钮，在配置好的渠道即可使用该应用。
![功能图片24.png](https://static.cwoa.net/8d70fc528aa743859d569c18bf853dee.png)

## 第四步：使用应用

目前OpsPilOt支持 Web，企微和钉钉、网页四类通知渠道，可以按照设定的机器人域名/端口等信息，在此四类渠道上发布。

比如在企微工作台创建应用，并且接入机器人，即可实现对话。
![功能图片25.png](https://static.cwoa.net/353e3a275da44f248cddcb15145526c7.png)

## 第五步：查看对话情况

当用户对话完成后，可以在应用中查看所有用户的对话记录以及用户对机器人的使用和调用情况。
![功能图片26.png](https://static.cwoa.net/4925fdad23e44661979115dddf67f346.png)
![功能图片27.png](https://static.cwoa.net/aafcffb33abd46a7a740fa9472cd8239.png)
